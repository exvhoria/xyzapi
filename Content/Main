-- LocalScript: AstraHub || By GhosttedXV

--// Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

--// Variables
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AstraHubGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.2, 0, 0.1, 0)
frame.Position = UDim2.new(0.4, 0, 0.05, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.2
frame.BorderSizePixel = 0
frame.AnchorPoint = Vector2.new(0.5, 0)
frame.Parent = screenGui

-- UI Corner
local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0, 10)

-- UI Stroke
local stroke = Instance.new("UIStroke", frame)
stroke.Thickness = 1.5
stroke.Color = Color3.fromRGB(90, 90, 90)

-- Fly Button
local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(1, 0, 1, 0)
flyButton.Text = "Toggle Fly"
flyButton.Font = Enum.Font.GothamMedium
flyButton.TextColor3 = Color3.new(1, 1, 1)
flyButton.BackgroundTransparency = 1
flyButton.TextScaled = true
flyButton.Parent = frame

-- Title Label (Optional Branding)
local title = Instance.new("TextLabel")
title.Text = "AstraHub || By GhosttedXV"
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, -0.8, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(200, 200, 200)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.Parent = frame

-- Fly Logic
local flying = false
local velocity = Instance.new("BodyVelocity")
velocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
velocity.P = 1250

local direction = Vector3.new()

-- Input Handling
UIS.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if not flying then return end

	if input.KeyCode == Enum.KeyCode.W then direction = Vector3.new(0, 0, -1)
	elseif input.KeyCode == Enum.KeyCode.S then direction = Vector3.new(0, 0, 1)
	elseif input.KeyCode == Enum.KeyCode.A then direction = Vector3.new(-1, 0, 0)
	elseif input.KeyCode == Enum.KeyCode.D then direction = Vector3.new(1, 0, 0)
	elseif input.KeyCode == Enum.KeyCode.Space then direction = Vector3.new(0, 1, 0)
	elseif input.KeyCode == Enum.KeyCode.LeftControl then direction = Vector3.new(0, -1, 0)
end)

UIS.InputEnded:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	direction = Vector3.new()
end)

-- Fly Toggle
flyButton.MouseButton1Click:Connect(function()
	flying = not flying

	if flying then
		velocity.Parent = humanoidRootPart
	else
		velocity.Parent = nil
	end
end)

-- Flight Movement
RunService.RenderStepped:Connect(function()
	if flying then
		local camCF = workspace.CurrentCamera.CFrame
		local moveDir = camCF:VectorToWorldSpace(direction)
		velocity.Velocity = moveDir * 50
	end
end)
